
<%= render 'menu' %>


  <input id='submit' type="submit" value="Submit">



<script>
	$( document ).ready(function() {

		var	$mainCatCheckboxes = $('.main-cat').find('input[type="checkbox"]'),
			$allItems = $('.items');
 
		$allItems.hide();

		$mainCatCheckboxes.change(function () {


			var curCatItems = $(this).parents('div').data('children');

			if ($(this).prop('checked')) {
				$(curCatItems).show();
				$('.groups').hide();
				$('.options').hide()

			} else {
				var $itemCheckboxes = $(curCatItems).find('input[type="checkbox"]:checked');
				$itemCheckboxes.removeAttr('checked');
				$('.groups').hide();
				$('.options').hide()
				$(curCatItems).hide();
			}
		});

		$('.groups').hide();




		// items code trying to follow johns pattern above

		var	$itemsCheckboxes = $('.items').find('input[type="checkbox"]'),
			$allGroups = $('.groups')
			
		var curItemClass
		var $itemShow



		$itemsCheckboxes.change(function (){
			

			var curItemGroups = $(this).parents('div').data('children');
			 curItemClass = $(this).parents('div').attr('class').substr(0,14).trim()
			 $('.options').hide()

			 // debugger
			 

			$(curItemGroups).each(function(){
				
			 		if ($(this).attr('class').substr(0,6).trim() == curItemClass.substr(0,6).trim()){
			 			// $('.cat-0.items-0').show()
			 			// "cat-0 items-0"
			 			var first = curItemClass.substr(0,6).trim()

			 			var second = curItemClass.substr(6,8).trim()
			 			




			 			$itemShow = $('.'+first+'.'+second+'.groups').show()
			 		}
				
			})
			
			if ($(this).prop('checked')) {
				
				$itemShow.show(); 

			} else {
				var groupCheckboxes = $(curItemGroups).find('input[type="checkbox"]:checked');
				groupCheckboxes.removeAttr('checked');
				$itemShow.hide();
			}

		})

		var $classToIdComp
		var $optionShow
		$('.allOptions').hide()
		

		//  working on options
		var	$groupsCheckboxes = $('.groups').find('input[type="checkbox"]'),
			$allOptions = $('.allOptions');

			$allOptions.hide();

			$groupsCheckboxes.change(function (){

				var curGroupOptions = $(this).parents('div').data('children');
				 $classToIdComp = $(this).parent().parent('div').attr('class').substr(0,14).trim()


				$allOptions.each(function(){
					// debugger

					
					if ($(this).attr('id').substr(0,13).trim() == $classToIdComp){
						
						$optionShow = $('.'+this.classList[0]+'.'+this.classList[1]+'.'+this.classList[2]).show()
						// $(".cat-0.items-0").show()

					}

				})

				if ($(this).prop('checked')){
					
					$optionShow.show();
				} else {

				var optionsClassToHide = $optionShow.attr('class').substr(19,23)

				var optionCheckboxes = $('.'+optionsClassToHide).find('input[type="checkbox"]:checked');
				optionCheckboxes.removeAttr('checked');
				$optionShow.hide()
			}

			})

			$('#submit').click(function(){
				
				if ($('#blake').find('input[type="checkbox"]:checked').length > 0){
					var allChecked = $('#blake').find('input[type="checkbox"]:checked')

					allChecked.each(function(){})
				}
			})


			




});
</script>