
<%= render 'menu' %>

<script>
	$( document ).ready(function() {

		var	$mainCatCheckboxes = $('.main-cat').find('input[type="checkbox"]'),
			$allItems = $('.items');
 
		$allItems.hide();

		$mainCatCheckboxes.change(function () {

			var curCatItems = $(this).parents('div').data('children');

			if ($(this).prop('checked')) {
				$(curCatItems).show();
				$('.groups').hide();

			} else {
				var $itemCheckboxes = $(curCatItems).find('input[type="checkbox"]:checked');
				$itemCheckboxes.removeAttr('checked');
				$('.groups').hide();
				$(curCatItems).hide();
			}
		});

		$('.groups').hide();

		

		



		// items code trying to follow johns pattern above

		var	$itemsCheckboxes = $('.items').find('input[type="checkbox"]'),
			$allGroups = $('.groups')
			
		var curItemClass
		var $itemShow


		$itemsCheckboxes.change(function (){

			var curItemGroups = $(this).parents('div').data('children');
			 curItemClass = $(this).parents('div').attr('class').substr(0,6).trim()

			$(curItemGroups).each(function(){
			 		if ($(this).attr('class').substr(0,6).trim() == curItemClass){

			 			$itemShow = $(this)
			 		}
				
			})
			
			if ($(this).prop('checked')) {
				
				$itemShow.show(); 
			} else {
				var groupCheckboxes = $(curItemGroups).find('input[type="checkbox"]:checked');
				groupCheckboxes.removeAttr('checked');
				$itemShow.hide();
			}

		})

		//  working on options
		var	$groupsCheckboxes = $('.groups').find('input[type="checkbox"]'),
			$allItems = $('.items');



});
</script>